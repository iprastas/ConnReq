(function(n){"use strict";function f(t){var f=t.data("docsTable"),u,r;i=n("<table>").addClass("table-bordered").attr("id","fixTable").appendTo(t);n("<caption>Прилагаемые документы(размером не более 10МБ каждый)<\/caption>").appendTo(i);u=n("<thead>").appendTo(i);r=n("<tr>").appendTo(u);n("<th>№<\/th>").appendTo(r);n("<th>Наименование документа<\/th>").appendTo(r);n("<th>Файл<\/th>").appendTo(r);n("<th>Действие<\/th>").appendTo(r);n(t).hide()}function e(r){var f=n("<tbody>").appendTo(i);n.ajax({type:"GET",headers:{"Cache-Control":"no-cache no-store"},url:t.url+"?t="+(new Date).getTime(),cashe:!1,success:function(i){var e,s,h;for(u=i.length,e=0;e<i.length;e++)s=n("<tr>").appendTo(f),n("<td>"+i[e].OrderNmb+"<\/td>").appendTo(s),n("<td>"+i[e].Text+"<\/td>").appendTo(s),n("<td><\/td>").appendTo(s),h=n("<td>").appendTo(s),n('<input type="file" name="fileUpload['+e+']" id="fileinput_'+i[e].OrderNmb+'" accept=".pdf,.doc,.docx"/>').appendTo(h);n(t.selector).show();o(n(r))},error:function(n){alert("Ошибка чтения списка документов. url:"+sett.url+" Статус -  "+n.status+" Техт: "+n.responseText)}})}function o(){n("input[type=file]").on("change",function(){var i=this.files[0].name,t;n(this).parent().prev().html(i);t=0;n("table tbody tr").each(function(){var i=n.trim(n(this).find("td:eq(2)").html());i.length>0&&t++});t===u&&n("#SubmitMultiply").removeAttr("hidden")})}var t={};n.ajaxSetup({cache:!1});var i=null,u=0,r={init:function(i){t=n.extend({url:null,selector:null},i);this.data("docsTable",t);f(this)},refresh:function(){f(this)},show:function(){n(this).show("slow")},hide:function(){n(this).hide("slow")},makeBody:function(){e(this)}};n.fn.docsTable=function(t){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Метод "+t+" не существует в jQuery.docsTable");else return r.init.apply(this,arguments)}})(jQuery),function(n){"use strict";function w(t,i){var a=t.toString(),u,v,y,e,h,o,r,s,l,p,c;if(a.indexOf("<!DOCTYPE")>=0){document.open();document.write(a);document.close();return}for(u=n("<div>").addClass("sgrid_caption").html(t.Caption).appendTo(i),u=n("<div>").addClass("sgrid_container").appendTo(i),v=n(i).sgrid("getSettings","nameRow4Modal"),f.length=0,u=n("<table id=sgrid>").addClass("scroll table").appendTo(u),y=n("<thead>").appendTo(u),e=0;e<t.HeaderRows.length;e++)for(h=n("<tr>").appendTo(y),o=0;o<t.Columns.length;o++)(r=t.HeaderRows[e]+"_"+t.Columns[o],t.Header[r]!==undefined)&&(s=n('<th scope="col">').attr("colspan",t.Header[r].ColSpan).attr("rowspan",t.Header[r].RowSpan).attr("id",r+"_th").appendTo(h),t.Header[r].ShowVertical===!0?(h.hasClass("vertical")||h.addClass("vertical"),n("<span>").addClass("vertical").html(t.Header[r].Value).appendTo(s)):(s.html(t.Header[r].Value),t.HeaderRows[e].toString()===v&&f.push(t.Header[r].Value)),e===0&&n(i).sgrid("getSettings","readOnly")===!0&&n(i).sgrid("getSettings","hasTreeColumn")===!1&&(n("<i>").addClass("fa fa-sort").appendTo(s),l=n(i).sgrid("getSettings","filterColumns"),l!==null&&l.indexOf(t.Columns[o])>=0&&n("<i>").addClass("fa fa-filter").prependTo(s)));p=n("<tbody>").attr("id","stbody").appendTo(u);c=0;n("table th span.vertical").each(function(){n(this).outerWidth()>c&&(c=n(this).outerWidth())});n("table tr.vertical th").height(c+10)}function b(t,i){for(var o,u,h=n(i).find("table.scroll tbody"),r=0;r<t.Rows.length;r++)for(o=n("<tr>").attr("id","row_"+t.Rows[r]).appendTo(h),u=0;u<t.Columns.length;u++){var f=t.Rows[r]+"_"+t.Columns[u],s=n("<td>").attr("id","td"+f).appendTo(o),e=t.Cells[f];e!==undefined&&(n(i).sgrid("setCellMode",s,e),n(i).sgrid("createCell",s,e,f))}t.VarRowCount===!0&&(n(i).sgrid("addRemoveIcon"),n(i).sgrid("onAddRowEvnt"),n(i).sgrid("onRemoveRowEvnt"))}function k(i,r){for(var l,s,e,c,v=n(r).find("table.scroll tbody"),o=0;o<i.Rows.length;o++)for(l=n("<tr>").attr("id","row_"+i.Rows[o]).appendTo(v),s=0;s<i.Columns.length;s++){var f=n("<td>").appendTo(l),a=i.Rows[o]+"_"+i.Columns[s],u=i.Cells[a];if(u!==undefined){f.attr("id","td"+a).attr("dataType",u.Type);(u.Type===t.Number||u.Type===t.Integer||u.Type===t.IntRange)&&f.addClass("sform-right-align");e=u.Value;switch(u.Type){case t.Boolean:e=u.BoolValue?"да":"нет";f.addClass("cell_disabled").html(e);break;case t.SelectList:e=u.options[u.Value];f.addClass("cell_disabled").html(e);break;case t.Tree:f.addClass("cell_disabled").html(e);var h=n(r).sgrid("getSettings","expanderTemplate"),y=n(r).sgrid("getSettings","indentTemplate"),p=n(r).sgrid("getSettings","expanderExpandedClass");for(h=n(h).prependTo(f),f.parent().attr("row",u.Row).attr("parentRow",u.ParentRow),c=0;c<=u.Level;c++)u.HasChildren&&h.addClass("fa fa-minus-circle"),c!==0&&n(y).insertBefore(h);break;default:f.addClass("cell_disabled").html(e)}}}}function d(i){var r=n("<div>").addClass("popup").attr("title","Ошибка ввода").appendTo(i);n("<div>").addClass("close_window").html("X").appendTo(r);n("<textarea>").attr("rows",7).attr("cols",77).attr("max-width","580px").attr("wrap","hard").attr("id","inputerror").appendTo(r);n("#stbody").on("change","input",function(){var r=n(this),u=r.prop("id").split("_",2);if(r[0].type==="file"){let e=r[0].files[0],f=r.parent();n('input[name="blobName"]',f).val(e.name);n('input[name="type"]',f).val(e.type);n('input[name="row"]',f).val(u[0]);n('input[name="col"]',f).val(u[1]);let o=u[0]+"_"+u[1],h=document.getElementById("form_"+o),s=i.sgrid("getSettings","saveBlobUrl");n.ajax({"async":!0,type:"POST",url:s,data:new FormData(h),cache:!1,contentType:!1,processData:!1}).then(function(){var h=f.parent();r.remove();n("<a>").attr("id",o).attr("name",o+"_"+t.BLob).attr("href",s).html(e.name).appendTo(h);h.prepend('<i class="fa fa-trash" aria-hidden="true" title="Удалить"><\/i>');n("td>i.fa-trash").on("click",function(){i.sgrid("deleteBlob",u[0],u[1])});return!0})}else s(i,r)});n("#stbody").on("change","textarea",function(){var t=n(this);s(i,t)});n("#stbody").on("change","select",function(){var t=n(this);s(i,t)})}function s(t,i){var h=t.sgrid("getSettings","dateDelimiter"),c=t.sgrid("getSettings","decimalDelimiter"),u=i.prop("name").split("_",3),f=i.prop("value").toString(),e,o,s;u.length===3&&(e=i.offset().left,o=i.offset().top,nt(u[2],f,i.prop("min"),i.prop("max"),h,c)?(u[2]==="7"&&(f=i.prop("checked").toString()),u[2]==="3"&&r===!1&&(f=t.sgrid("toRuDate",f)),n.ajax({"async":!0,type:"POST",url:t.sgrid("getSettings","root")+t.sgrid("getSettings","posturl"),data:"r="+u[0]+"&c="+u[1]+"&val="+f,success:function(i){var f,s;if(i.error!==undefined&&i.error!==null)v(e,o,i.error);else{for(f=0;f<i.calculated.length;f++)n("input#"+i.calculated[f].Row+"_"+i.calculated[f].Column).val(i.calculated[f].Value);try{r?n("input#"+i.changed.Row+"_"+i.changed.Column).val(i.changed.Value):(s=i.changed.Value,u[2]==="3"&&(s=t.sgrid("toJsDate",s)),n("input#"+i.changed.Row+"_"+i.changed.Column).val(s))}catch(h){alert("Не заполнена структура ответа PostBackData: "+h.toString())}}},error:function(n){alert(n.responseText)}})):(s=tt(u[2],i.prop("min"),i.prop("max"),t.sgrid("getSettings","decimalDelimiter"),t.sgrid("getSettings","dateDelimiter")),v(e,o,s)))}function g(t){n("#stbody a").on("click",function(i){i.preventDefault();var r=n(this).attr("id").split("_",2);t.sgrid("setForm",0,r[0],r[1]);window.history.pushState({idForm:n(this).attr("href")},null,null)});window.onpopstate=function(n){n.state!==null&&t.sgrid("getIdForm")!==n.state.idForm&&t.sgrid("setForm",n.state.idForm,0,0)};n(t).on("formReady.sgrid",function(t){t.preventDefault();n(this).off("formReady.sgrid")});if(n(t).sgrid("getSettings","readOnly")===!0&&n(t).sgrid("getSettings","hasTreeColumn")===!1){n("th i.fa").filter(".fa-sort",".fa-sort-amount-asc",".fa-sort-amount-desc").on("click",function(n){it(n.currentTarget.parentNode.cellIndex,t)});n("th i.fa-filter").on("click",function(i){n(t).sgrid("initFilterDialog",i.currentTarget.parentElement.cellIndex,i.currentTarget.parentElement.innerText)})}n("td").on("click","span.sgrid-expander",function(){var i=n(this);a(t,i,null)});n("td").on("click",function(i){i.target.className==="fa fa-pen"?t.sgrid("initModalRowEdit",n(i.target).parent().parent(),n(i.target).parent().text()):n(i.target.children).hasClass("fa-pen")&&t.sgrid("initModalRowEdit",n(i.target).parent(),n(i.target).text())});n("#dlgBtnSave").on("click",function(){var r=[],u={Row:0,Column:0,Value:"",Type:0},e=n("#ModalEdit"),o=t.sgrid("getSettings","dateDelimiter"),s=t.sgrid("getSettings","decimalDelimiter"),i,f;for(e.find("input , select").each(function(t,i){var f=n(i).prop("name").split("_",3),e=n(i).prop("value");u={Row:f[0],Column:f[1],Value:e,Type:f[2]};r.push(u)}),n("#ModalEdit").modal("hide"),i=0;i<r.length;i++)f=r[i].Row+"_"+r[i].Column,n("#"+f,"div.sgrid_container").prop("value",r[i].Value)});n("#dlgBtnFilter").on("click",function(){var r=n("#FilterDlg"),i="";n("#filterSelect",r).find(":selected").each(function(t,r){i=n(r).val()});i===""?t.sgrid("showAll"):t.sgrid("showOnly",i)})}function a(t,i,r){var s=n(i.closest("tr")).attr("row"),u,f,e,o;if(i.hasClass("fa-minus-circle")?(i.removeClass("fa-minus-circle").addClass("fa-plus-circle"),r=!0):i.hasClass("fa-plus-circle")&&(i.removeClass("fa-plus-circle").addClass("fa-minus-circle"),r=!1),r!==null){for(u=[],f=t.sgrid("getChildRows",s),u=f.slice(),e=0;e<u.length;e++)for(f=t.sgrid("getChildRows",u[e]),o=0;o<f.length;o++)u.push(f[o]);u.forEach(function(n){r===!0?t.sgrid("hideRow",n):t.sgrid("showRow",n)})}}function nt(n,t,i,u,f,e){var o,s;if(t==="")return!0;s="^(0[1-9]|[12][0-9]|3[01])\\"+f+"(0[1-9]|1[012])\\"+f+"\\d{1,4}";switch(n){case"1":t=t.replace(/\s+/g,"");o=new RegExp("^[-+]?[0-9]*\\"+e+"?[0-9]+$");break;case"5":t=t.replace(/\s+/g,"");o=new RegExp(/^[-+]?\d+$/);break;case"3":if(r)o=new RegExp(s+"$");else return!0;break;case"4":o=new RegExp(s+"[ \\u00A0]+(\\d{2}[:]){1,2}\\d{2}$");break;case"6":return o=new RegExp(/^[-+]?\d+$/),o.test(t)?Number(t)>=Number(i)&&Number(t)<=Number(u)?!0:!1:!1;default:return!0}return o.test(t)}function v(t,i,r){n(".popup").css("left",20+n(".popup").css("width").replace("px","")/2);n(".popup").css("top",20+n(".popup").css("height").replace("px","")/2);n("#inputerror").html(r);n(".popup, .close_order, .overlay").on("click",function(){n(".popup, .overlay").css({opacity:"0",visibility:"hidden"})});n(".popup, .overlay").css({opacity:"1",visibility:"visible"})}function tt(n,t,i,r,u){switch(n){case"1":return"Введите вещественное число. Разделитель - "+r+" (Например 10"+r+"33 или 999)";case"2":return"Введите текст";case"3":return"Требуется дата в формате дд"+u+"мм"+u+"гггг";case"4":return"Дата и время в формате дд"+u+"мм"+u+"гггг чч:мин:сек ";case"5":return"Требуется целое число";case"6":return"Требуется целое число от "+t+" до "+i;case"8":return"Введите текст";case"9":return"";case"10":return"Выберите из списка";default:return""}}function y(t){t==="show"?(n("#mod-progress").modal("show"),arguments.length>=2?n("#progressBarParagraph").text(arguments[1]):n("#progressBarParagraph").text("??..."),window.progressBarActive!==!0&&n("body").css("pointer-events","none"),window.progressBarActive=!0):(setTimeout(function(){n("#progress-close").trigger("click")},1e3),window.progressBarActive=!1,n("body").css("pointer-events","auto"))}function it(t,i){function s(t,u,f){var h=2,l=1,c=0,s=0,a=n(i).sgrid("getSettings","dateDelimiter"),e,o;return r||(a="-",h=0,c=2),e=t.split(a),o=u.split(a),s=f?parseInt(e[h])-parseInt(o[h]):parseInt(o[h])-parseInt(e[h]),s===0?(s=f?parseInt(e[l])-parseInt(o[l]):parseInt(o[l])-parseInt(e[l]),s===0?f?parseInt(e[c])-parseInt(o[c]):parseInt(o[c])-parseInt(e[c]):s):s}function c(n,t,i){var r=s(n,t,i);if(r===0){n=n.split(" ")[1];t=t.split(" ")[1];var e=0,o=1,h=2,u=n.split(":"),f=t.split(":");return r=i?parseInt(u[e])-parseInt(f[e]):parseInt(f[e])-parseInt(u[e]),r===0?(r=i?parseInt(u[o])-parseInt(f[o]):parseInt(f[o])-parseInt(u[o]),r===0&&(r=i?parseInt(u[h])-parseInt(f[h]):parseInt(f[h])-parseInt(u[h])),r):r}return r}var h=i,f=[],u=!0,e,o;n("i.fa").filter(".fa-sort",".fa-sort-amount-asc",".fa-sort-amount-desc").each(function(i){if(i===t){var r="h";n(this).hasClass("fa-sort-amount-asc")&&(r="a");n(this).hasClass("fa-sort-amount-desc")&&(r="d");n(this).removeClass("fa-sort-amount-asc fa-sort-amount-desc");(r==="h"||r==="d")&&(n(this).addClass("fa-sort-amount-asc active"),u=!0);r==="a"&&(n(this).addClass("fa-sort-amount-desc active"),u=!1)}else n(this).removeClass().addClass("header").addClass("fa fa-sort")});e=function(){this.Key="";this.KeyType=0;this.Cells=[]};o=n(h).find("tbody tr").each(function(){var i=new e;n(this).children().each(function(r){var u=n(this).text().replace(/(\r\n|\n|\r)/gm," ");r===t&&(i.Key=u,i.KeyType=n(this).attr("dataType"));i.Cells.push(u)});f.push(i)});f.sort(function(t,r){var o=n(i).sgrid("getSettings","decimalDelimiter"),f,e;switch(t.KeyType){case"2":case"8":case"7":if(t.Key===r.Key)return 0;if(t.Key>r.Key)return u?1:-1;if(t.Key<r.Key)return u?-1:1;break;case"1":return f=t.Key.replace(o,"."),e=r.Key.replace(o,"."),u?parseFloat(f)-parseFloat(e):parseFloat(e)-parseFloat(f);case"5":case"6":return u?t.Key-r.Key:r.Key-t.Key;case"3":return s(t.Key,r.Key,u);case"4":return c(t.Key,r.Key,u)}});o.each(function(t){var i=f[t];n(this).children().each(function(t){n(this).text(i.Cells[t])})})}function rt(n){for(var r,i={},t=0;t<n.length;t++)r=n[t],i[r]=!0;return Object.keys(i)}var h="",c=null,p=1e4,f=[],l="",r=!1,e=!1,o="",u;const t=Object.freeze({Empty:0,Number:1,Text:2,Date:3,DateTime:4,Integer:5,IntRange:6,Boolean:7,CLob:8,BLob:9,SelectList:10,Button:11,Tree:12}),i=Object.freeze({Disable:0,Input:1,Calculate:2,History:3,InputRO:4,HistoryRO:5,Header:6,Error:7,OutRef:8,Cumulative:9});u={initGrid:function(t){var i=n.extend({},{geturl:null,posturl:null,getImgUrl:null,cellsDataUrl:null,saveBlobUrl:null,getBlobUrl:null,showAlert:!1,decimalDelimiter:",",dateDelimiter:".",formMode:"Input",readOnly:!1,root:"",hasTreeColumn:!1,expanderTemplate:'<span class="sgrid-expander"><\/span>',indentTemplate:'<span class="sgrid-indent"><\/span>',expanderExpandedClass:"fa fa-minus-circle",expanderCollapsedClass:"fa fa-plus-circle",modalRowEdit:!1,nameRow4Modal:null,nameCol4Modal:null,filterColumns:null,formId:0},t);return this.each(function(){var t=n(this);t.sgrid("setGridContainer",n(this));t.sgrid("setSettings",i);c=i.formId;t.sgrid("setForm",0,0,0);t.sgrid("createProgressBar",n(this));i.modalRowEdit==="true"&&t.sgrid("createModalEdit",n(this));i.filterColumns!==null&&i.filterColumns.length>0&&t.sgrid("createFilterDialog",n(this));r=t.sgrid("detectIE")})},detectIE:function(){var n=window.navigator.userAgent,i=n.indexOf("MSIE "),t;return i>0?!0:(t=n.indexOf("Trident/"),t>0)?!0:!1},setGridContainer:function(t){return n(this).data("sgrid",t)},getGridContainer:function(){return n(this).data("sgrid")},getSettings:function(t){return n(this).sgrid("getGridContainer")?n(this).sgrid("getGridContainer").data("settings")[t]:null},setSettings:function(t){n(this).sgrid("getGridContainer").data("settings",t)},changeSetting:function(t,i){n(this).sgrid("getGridContainer").data("settings")[t]=i},createProgressBar:function(t){var f=n('<div class="modal fade in" id="mod-progress" role="dialog">').appendTo(n(t)),i=n("<div>").addClass("modal-dialog").appendTo(f),r=n("<div>").addClass("modal-content").appendTo(i).css("height","180px"),e=n("<div>").addClass("modal-body").appendTo(r).css("max-height","180px"),u;i=n("<div>").addClass("text-center").appendTo(e);i=n('<div id="result" style="font-size: 1.1em; padding-bottom: 5px">').appendTo(i);n('<p id="progressBarParagraph">').appendTo(i);i=n('<div id="ProgressStripe" class="progress progress-striped active" style="position:relative; top:10px; width:100%;">').insertAfter(i);n('<div id="ProgressMessage" class="progress-bar progress-bar-info" style="width: 100%; border:none;"><\/div>').appendTo(i);u=n('<div class="modal-footer">').html("Остановить процесс - Esc").appendTo(r);n('<button id="progress-close" type="button" class="btn btn-secondary" data-dismiss="modal" hidden="hidden">').appendTo(u).html("Закрыть")},createModalEdit:function(t){var f=n('<div class="modal fade" id="ModalEdit" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">').appendTo(t),e=n('<div class="modal-dialog" max-height:100%;  margin-top: 50px; margin-bottom:50px;">').appendTo(f),i=n('<div class="modal-content">').appendTo(e),r=n('<div class="modal-header">').appendTo(i),u=n('<button type="button" class="close" data-dismiss="modal">').appendTo(r);n('<span aria-hidden="true">&times;<\/span>').appendTo(u);n('<span class="sr-only">Close<\/span>').appendTo(u);n('<h4 class="modal-title" id="ModalLabel">Modal title<\/h4>').appendTo(r);var o=n('<div class="modal-body">').appendTo(i),h=n('<form class="form-horizontal" role="form">').appendTo(o),s=n('<div class="modal-footer">').appendTo(i);n('<button type="button" class="btn btn-primary" id="dlgBtnSave">Закрыть<\/button>').appendTo(s)},initModalRowEdit:function(t,i){var r=n("#ModalEdit"),u=r.find("div.modal-body");u.children().remove();n("#ModalLabel").text(i);t.children().each(function(t,i){var e,r,o;n(i).hasClass("cell_input")===!0&&(e=n('<form class="form-horizontal" role="form">').appendTo(u),r=n('<div class="form-group">').appendTo(e),n('<label  class="col-md-6 control-label">'+f[t]+"<\/label>").appendTo(r),o=n('<div class="col-md-6">').appendTo(r),n(i).find("input:enabled , select:enabled , textarea:enabled").clone(!0).appendTo(o))});r.modal("show")},createFilterDialog:function(t){var e=n('<div class="modal fade" id="FilterDlg" tabindex="-1" role="dialog" aria-labelledby="FilterDlgLabel" aria-hidden="true">').appendTo(t),o=n('<div class="modal-dialog" max-height:100%;  margin-top: 50px; margin-bottom:50px;">').appendTo(e),i=n('<div class="modal-content">').appendTo(o),r=n('<div class="modal-header">').appendTo(i),u=n('<button type="button" class="close" data-dismiss="modal">').appendTo(r);n('<span aria-hidden="true">&times;<\/span>').appendTo(u);n('<span class="sr-only">Close<\/span>').appendTo(u);n('<h4 class="modal-title" id="FilterDlgLabel"><\/h4>').appendTo(r);var s=n('<div class="modal-body">').appendTo(i),h=n('<form class="form-horizontal" role="form">').appendTo(s),f=n('<div class="form-group">',"#FilterDlg").appendTo(h);n('<label  class="col-md-6 control-label">Выберите из списка<\/label>').appendTo(f);var c=n('<div class="col-md-6">',"#FilterDlg").appendTo(f),a=n('<select id="filterSelect"><\/select>').appendTo(c),l=n('<div class="modal-footer">').appendTo(i);n('<button type="button" class="btn btn-primary" id="dlgBtnFilter" data-dismiss="modal">Фильтровать<\/button>').appendTo(l)},initFilterDialog:function(t,i){var e=[],u,f,r;for(l=t,n("td[id*=_"+t+"]").each(function(){e.push(this.innerText)}),u=rt(e),n("#FilterDlgLabel").text(i),f=n("#filterSelect","#FilterDlg"),f.children().remove(),n("<option>").attr("value","").text("").appendTo(f),r=0;r<u.length;r++)n("<option>").attr("value",u[r]).text(u[r]).appendTo(f);n("#FilterDlg").modal("show")},showAll:function(){n("tr:hidden",this).show()},showOnly:function(t){n("td[id*=_"+l+"]").each(function(){this.innerText===t?n(this).parent("tr").show():n(this).parent("tr").hide()})},setIdForm:function(n){h=n},getIdForm:function(){return h},setParams:function(n){o=n},getStartFormId:function(){return c},setForm:function(t){var i=n(this);i.sgrid("clearForm");i.sgrid("setIdForm",t);let r=i.sgrid("getSettings","root")+i.sgrid("getSettings","geturl");return o.length>0&&(r+=o),n.ajax({"async":!0,type:"GET",cache:!1,url:r,success:function(n){var t=i.sgrid("getSettings","readOnly");e=n.VarRowCount?!0:!1;w(n,i);t===!0?k(n,i):(b(n,i),d(i));g(i);i.trigger("formReady.sgrid");i.sgrid("setPencil")},error:function(n){i.trigger("formReady.sgrid");alert("Ошибка чтения данных setForm. Статус -  "+n.status)}})},getCurrentFormData:function(){return fData},clearForm:function(){var t=n(this).sgrid("getGridContainer");n(t).find("div.sgrid_container").remove();n(t).find("div.sgrid_caption").remove()},updateCell:function(u){var s=u.Row+"_"+u.Column,o=u.Value,b=u.Type,a=u.Mode,k=u.Tooltip,e=null,y,c,h,f,p,l,v,w;if(a===i.Header){s=s+"_th";e=n("[id='"+s+"']");o!==undefined&&e[0]!==undefined&&(e[0].innerText=o);return}if(y=n(this).sgrid("getGridContainer"),c=(a===i.Input||a===i.History)&&n(y).sgrid("getSettings","readOnly")==="false",e=n("[id='td"+s+"']"),e!==null&&e!==undefined){if(e.length===0&&n(this).sgrid("newCell",u),a===i.Error){s="td"+s;e=n("[id='"+s+"']");e.removeClass().addClass("cell_error").attr("title",o);e.children().val("");return}if(h=n("td#td"+s).attr("title",k),n(this).sgrid("setCellMode",h,u),e.length>0){f=n("input",e[0]);let i=!1;f.length===0&&(f=n("<input>").attr("name",s+"_"+u.Type).attr("id",s),i=!0);switch(b){case t.Number:case t.DateTime:case t.Integer:case t.IntRange:c===!0?(f.removeAttr("disabled").removeAttr("readonly"),f.val(o),h.html(""),i&&f.appendTo(h)):h.html(o).attr("datatype",u.Type);break;case t.Date:r||c!==!0||(o=n(this).sgrid("toJsDate",o));c===!0?f.removeAttr("disabled").removeAttr("readonly",""):f.val(o).attr("disabled","").attr("readonly","");f.val(o);(i||o.length>0)&&f.appendTo(h);break;case t.Text:c===!0?(i&&f.appendTo(h),f.removeAttr("disabled").removeAttr("readonly",""),f.val(o),h.html("")):h.html(o);break;case t.Boolean:f=n("input",e[0]);c===!0?f.removeAttr("disabled"):f.attr("disabled","disabled");p=n(e[0]);p.prop("checked",o);break;case t.CLob:f=n("textarea",e[0]);c===!0?f.removeAttr("disabled").removeAttr("readonly",""):f.attr("disabled","disabled").attr("readonly");f.val(o);break;case t.BLob:c&&u.Value.length===0?n('<input type="file" accept=".pdf,.doc,.docx,.jpeg,.png"/>').attr("id",s).appendTo(h):u.Value.length>0&&(f.attr("type","text").attr("value",u.Value).addClass("sform-right-align").attr("disabled","disabled").appendTo(h),h.prepend('<i class="fa fa-times" aria-hidden="true" title="Удалить"><\/i>'));break;case t.SelectList:l=n("select#"+s);l===undefined&&(l=n("<select>").attr("name",s+"_"+u.Type).attr("id",s).appendTo(h));c||l.attr("disabled","disabled");for(v in u.options)v===u.Value&&(w=n("<option>").attr("value",v).html(u.options[v]).appendTo(l),w.attr("selected","selected"));break;case t.Button:n(e[0]).attr("href",o)}}}},newCell:function(r){var e=r.Row+"_"+r.Column,o=n("tbody#stbody",this),f=n("#row_"+r.Row,o),u;f.length===0&&(f=n("<tr>").attr("id","row_"+r.Row).appendTo(o));u=n("<td>").attr("id","td"+e).attr("dataType",r.Type).appendTo(f);this.sgrid("setCellMode",u,r);(r.Type===t.Number||r.Type===t.Integer||r.Type===t.IntRange)&&u.addClass("sform-right-align");this.sgrid("getSettings","readOnly")==="true"&&r.Mode!==i.InputRO?u.addClass("cell_disabled").html(r.Value):this.sgrid("createCell",u,r,e)},changeMode:function(t){if(settings.formMode!==t){switch(t){case"Input":n("td.cell_input",this).children().removeAttr("disabled");n("td.cell_fromhistory",this).children().attr("disabled","disabled");break;case"History":n("td.cell_input",this).children().attr("disabled","disabled");n("td.cell_fromhistory",this).children().removeAttr("disabled");break;default:alert("mode может принимать значения: Input , History !")}settings.formMode=t}},getCellsData:function(t,i){i=i||0;var u=!1,r=n(this);n(document).on("keydown",function(n){n.which===27&&(u=!0)});return n.ajax({url:r.sgrid("getSettings","root")+r.sgrid("getSettings","cellsDataUrl")+"?i="+t.toString()+"&lv="+i.toString(),"async":!0,cache:!1,success:function(n){var t,f;if(r.trigger("stopSpinner.sgrid"),n.cells!==undefined){for(t=0;t<n.cells.length;t++)r.sgrid("updateCell",n.cells[t]);if(n.Percent>="100"||u||i>=p){y("hide");r.trigger("dataReady.sgrid");return}f=i+1;r.sgrid("getCellsData",1,f)}else r.trigger("dataReady.sgrid"),n.indexOf("<!DOCTYPE")===0&&document.write(n)},error:function(n){alert("Ошибка чтения данных getCellsData. Статус -  "+n.status);r.trigger("stopSpinner.sgrid");y()}})},getChildRows:function(t){var r=n(this),i=[];return r.find("tbody").find("tr").each(function(r,u){n(u).attr("parentrow")===t&&i.push(n(u).attr("row"))}),i},hideRow:function(t){n("tr[row="+t+"]").hide()},showRow:function(t){n("tr[row="+t+"]").show()},setPencil:function(){var t=n(this),i=t.sgrid("getSettings","nameCol4Modal");t.sgrid("getSettings","modalRowEdit")==="true"&&n("tr td").each(function(t,r){var u=r.id.split("_",2);u.length>1&&u[1]===i&&n(r).prepend('<i class="fa fa-pen"><\/i>')})},addRemoveIcon:function(){var t=n(this);n("tbody tr td:first-child",t).prepend('<i class="fa fa-trash"><\/i>');n("tbody tr:last td i",t).removeClass("fa-trash").addClass("fa fa-plus-circle")},onRemoveRowEvnt:function(){var t=n(this);n("td > i.fa-trash").on("click",function(i){var r=n(i.target.parentElement),u=r.attr("id").replace("td",""),f=u.slice("_");t.sgrid("rowDeleted",f[0]);r.parent().remove()})},onAddRowEvnt:function(){var t=n(this);n("td > i.fa-plus-sign").on("click",function(i){var r=n(i.target.parentElement),u=r.attr("id").replace("td",""),f=u.slice("_");t.sgrid("addRow",f[0])})},offRemoveRowEvnt:function(){n("td > i.fa-trash").off("click")},offAddRowEvnt:function(){n("td > i.fa-plus-sign").off("click")},rowDeleted:function(t){n(this).trigger("rowChanged.sgrid",[t,0])},addRow:function(t){var i=n(this),r;i.sgrid("offRemoveRowEvnt");i.sgrid("offAddRowEvnt");r=parseInt(t)+1;n("tbody tr:last td:first i",i).removeClass("fa fa-plus-sign").addClass("fa fa-trash");n("tbody tr:last",i).clone(!0).appendTo("tbody");n("tbody tr:last td:first i",i).removeClass("fa fa-trash").addClass("fa fa-plus-sign");n("tbody tr:last td",i).each(function(i,u){var f=n(u).prop("id"),e=f.replace("td"+t,"td"+r);n(u).prop("id",e);n("input , textarea , select",n(u)).each(function(i,u){var o=n(u).prop("name"),s=o.replace(t+"_",r+"_"),f,e;n(u).prop("name",s);f=n(u).prop("id");e=f.replace(t+"_",r+"_");n(u).prop("id",e);n(u).prop("value","")})});i.sgrid("onRemoveRowEvnt");i.sgrid("onAddRowEvnt");n(this).trigger("rowChanged.sgrid",[r,1])},getTableHtml:function(){var t=n(this);return n(".sgrid_container",t).html()},toJsDate:function(n){if(n.length>0){var t=n.split(".",3);return t[2]+"-"+t[1]+"-"+t[0]}return n},toRuDate:function(n){if(n.length>0){var t=n.split("-",3);return t[2]+"-"+t[1]+"-"+t[0]}return n},deleteRow:function(t){n("#row_"+t,this).remove()},deleteAllRows:function(){e&&n("tbody",this).children().remove()},setCellMode:function(n,r){n.removeClass();switch(r.Mode){case i.Disable:n.addClass("cell_disabled").attr("dataType",r.Type).html(r.Value);(r.Type===t.Number||r.Type===t.Integer||r.Type===t.IntRange)&&n.addClass("sform-right-align");break;case i.Input:case i.InputRO:n.addClass("cell_input");break;case i.Calculate:n.addClass("cell_calculated");break;case i.History:case i.HistoryRO:n.addClass("cell_fromhistory");break;case i.OutRef:n.addClass("cell_outref");break;case i.Cumulative:n.addClass("cell_cumulative")}},newRow:function(i,r){var o=n(this),l=o,v=n(this).find("table.scroll tbody"),s,c=1,f,u,h,e;for(r===null||r===undefined?s=n("<tr>").attr("id","row_"+i[0].Row).appendTo(v):(f=n("tr#row_"+r),n(".sgrid-expander",f).addClass("fa fa-minus-circle"),n("span",f).each(function(){c++}),s=n("<tr>").attr("id","row_"+i[0].Row).insertAfter(f)),u=0;u<i.length;u++){if(h=i[u].Row+"_"+i[u].Column,e=n("<td>").attr("id","td"+h).appendTo(s),i[u].Type===t.Tree&&(r!==null||r!==undefined)){i[u].Level=c;i[u].ParentRow=r;e.on("click","span.sgrid-expander",function(){var t=n(this);a(l,t,null)})}o.sgrid("setCellMode",e,i[u]);o.sgrid("createCell",e,i[u],h)}},createCell:function(u,f,e){var h=n(this),y="дд.мм.гггг",s=f.Mode===i.Input||f.Mode===i.History,o,p,w,v,l,b,c,k,a;f.Tooltip!==undefined&&f.Tooltip!==null&&f.Tooltip.length>0&&u.attr("title",f.Tooltip);o=n("<input>").attr("name",e+"_"+f.Type).attr("id",e);switch(f.Type){case t.Number:o.attr("type","text").addClass("sform-right-align").attr("value",f.Value);s?(o.attr("placeholder","0,0"),o.appendTo(u),u.html("")):u.html(f.Value);break;case t.Text:s?o.attr("type","text").attr("value",f.Value).attr("placeholder","введите текст").appendTo(u):[i.InputRO,i.HistoryRO,i.OutRef,i.Cumulative].includes(f.Mode)?(o.attr("type","text").addClass("sform-left-align").attr("value",f.Value).attr("disabled","disabled"),o.appendTo(u)):u.addClass("sform-left-align").html(f.Value);break;case t.Date:!r&&f.Value.length>0&&(f.Value=this.sgrid("toJsDate",f.Value));o.attr("type","date").attr("value",f.Value);s?o.attr("placeholder",y):o.attr("disabled","disabled").attr("readonly","");(s||f.Value.length>0)&&o.appendTo(u);break;case t.DateTime:o.attr("type","text").attr("value",f.Value);s?o.attr("placeholder",y+" 00:00:00"):o.attr("disabled","disabled").attr("readonly","");(s||f.Value.length>0)&&o.appendTo(u);break;case t.Integer:o.attr("type","text").attr("value",f.Value).addClass("sform-right-align");s?o.attr("type","text").attr("placeholder","введите целое"):o.attr("disabled","disabled").attr("readonly","");o.appendTo(u);break;case t.IntRange:o.attr("type","text").attr("value",f.Value).addClass("sform-right-align");s?o.attr("type","text").attr("min",f.Min).attr("max",f.Max).attr("placeholder","целое от "+f.Min+" до "+f.Max):o.attr("disabled","disabled").attr("readonly","");o.appendTo(u);break;case t.Boolean:o.attr("type","checkbox").attr("name",e+"_"+f.Type).appendTo(u).after(f.Value);o.prop("checked",f.BoolValue);s||o.attr("disabled","disabled");break;case t.CLob:p=n("<textarea>").attr("id",e).attr("name",e+"_"+f.Type).attr("rows",f.Rows).attr("cols",f.Cols).html(f.Value).appendTo(u);s||p.attr("disabled","disabled");break;case t.BLob:if(s&&f.Value.length===0&&h.sgrid("addBlobForm",u,e),f.Value.length>0&&(w=h.sgrid("getSettings","root")+h.sgrid("getSettings","getBlobUrl")+"?row="+f.Row+"&col="+f.Column,n("<a>").attr("id",e).attr("name",e+"_"+f.Type).attr("href",w).html(f.Value).appendTo(u)),s&&f.Value.length>0){u.prepend('<i class="fa fa-trash" aria-hidden="true" title="Удалить"><\/i>');n("td#td"+e+">i.fa-trash").on("click",function(){h.sgrid("deleteBlob",f.Row,f.Column)})}break;case t.SelectList:v=n("<select>").attr("name",e+"_"+f.Type).attr("id",e).appendTo(u);s||v.attr("disabled","disabled");for(l in f.options)b=n("<option>").attr("value",l).html(f.options[l]).appendTo(v),l===f.Value&&b.attr("selected","selected");break;case t.Button:n("<a>").attr("id",e).attr("name",e+"_"+f.Type).attr("class","btn btn-primary").attr("href",f.Url).html(f.Value).appendTo(u);break;case t.Tree:for(s?o.attr("type","text").attr("value",f.Value).attr("placeholder","введите текст").appendTo(u):f.Mode===i.InputRO||f.Mode===i.HistoryRO||f.Mode===i.OutRef||f.Mode===i.Cumulative?(o.attr("type","text").addClass("sform-left-align").attr("value",f.Value).attr("disabled","disabled"),o.appendTo(u)):u.addClass("sform-left-align").html(f.Value),c=h.sgrid("getSettings","expanderTemplate"),k=h.sgrid("getSettings","indentTemplate"),c=n(c).prependTo(u),u.parent().attr("row",f.Row).attr("parentRow",f.ParentRow),a=0;a<=f.Level;a++)f.HasChildren&&c.addClass("fa fa-minus-circle"),a!==0&&n(k).insertBefore(c)}},setCellBottomBorderColor:function(n,t){n.css("border-bottom",t)},addBlobForm:function(t,i){var r=n(this),u=jQuery("<form>",{id:"form_"+i,method:"POST",enctype:"multipart/form-data"}).append(jQuery("<input>",{name:"blobData",accept:".pdf,.doc,.docx,.jpeg,.png",type:"file",id:i})).append(n("<input>",{name:"blobName",value:"",hidden:"hidden"})).append(n("<input>",{name:"type",value:"",hidden:"hidden"})).append(n("<input>",{name:"row",value:"",hidden:"hidden"})).append(n("<input>",{name:"col",value:"",hidden:"hidden"})).append(n("<input>",{type:"submit",value:"Сохранить",hidden:"hidden"})).appendTo(t)},deleteBlob:function(t,i){var u=n(this),r=new FormData;r.append("blobData",null);r.append("row",t);r.append("col",i);n.ajax({"async":!0,type:"POST",url:u.sgrid("getSettings","root")+u.sgrid("getSettings","saveBlobUrl"),data:r,cache:!1,contentType:!1,processData:!1,error:function(t){n.notify("Ошибка deleteBlob. Статус -  "+t.status+" Техт: "+t.responseText,{clickToHide:!1,autoHideDelay:1e4})}}).then(function(){var r=t+"_"+i,f=n("td#td"+r);return f.children().remove(),u.sgrid("addBlobForm",f,r),!0})},hideEmptyRows:function(t){for(var r,f,o=n(this),u=n("tbody tr",o),i=0;i<u.length;i++){var s=u[i],e=!0,h=n("td",n(s));for(r=0;r<t.length;r++)if(f=n(h[t[r]]).html(),!(f==="0"||f==="")){e=!1;break}e&&n(u[i]).attr("hidden","hidden")}},showAllRow:function(){var t=n(this);n("tbody tr",t).removeAttr("hidden")}};n.fn.sgrid=function(t){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method with name "+t+" does not exists for jQuery.sgrid");else return u.initGrid.apply(this,arguments)}}(jQuery),function(n){"use strict";function f(t,i){var f=n(t).data("slistbox"),u,r,e,o,s;if(f!==null&&f!==undefined){if(u=n("<select>",n(t)).appendTo(t).addClass("form-select"),i.length===0){n(t).hide();return}for(r=0;r<i.length;r++)e=n("<option>").attr("value",i[r].Value).html(i[r].Text).appendTo(u),i[r].Selected===!0&&e.prop("selected","selected"),i[r].Enabled===!1&&e.prop("disabled","disabled");if(f.autofocus===!0&&u.prop("autofocus","autofocus"),n(t).show(),f.multiple===!0){o=u.position().top+u.height()-8;u.prop("multiple",!0).prop("size",f.size);s=n('<div style="display: block;">').appendTo(t);n("<i>").appendTo(s).addClass("fa fa-check-circle").prop("title","Выбрать все").css("top",-o).on("click",function(){n("select > option",n(t)).prop("selected","selected").parent().trigger("focus")});n('<i style="padding-left: 10px;">').appendTo(s).addClass("fa fa-times-circle").prop("title","Сбросить все").css("top",-o).on("click",function(){n("select > option",n(t)).prop("selected","").parent().trigger("focus")})}}}function e(t,i){var o,f,u,e;if(i.length===0){n(t).slistbox("hide","fast");return}if(o=n(t).data("slistbox").multiple,n(t).slistbox("show","fast"),n("option",n(t)).length>=i.length)n("option",n(t)).each(function(t,u){t>=i.length?n(u).hide():(n(u).attr("value",i[t].Value).html(i[t].Text),n(u).is(":hidden")&&n(u).show(),r(n(u),i[t]))});else for(n("option",n(t)).each(function(t,u){t<i.length&&(n(u).attr("value",i[t].Value).html(i[t].Text),n(u).is(":hidden")&&n(u).show(),r(n(u),i[t]))}),f=n("select",n(t)),o&&f.attr("multiple","multiple"),u=n("option",n(t)).length;u<i.length;u++)e=n("<option>").attr("value",i[u].Value).html(i[u].Text).appendTo(f),i[u].Selected===!0&&e.prop("selected","selected"),i[u].Enabled===!1&&e.prop("disabled","disabled")}function r(n,t){t.Selected===!0?n.prop("selected","selected"):n.prop("selected","");t.Enabled===!1?n.prop("disabled","disabled"):n.prop("disabled","")}function u(t,i){return n.ajax({"async":i,type:"GET",headers:{"Cache-Control":"no-cache no-store"},url:t,cashe:!1,error:function(n){alert("Ошибка чтения. url:"+t+" Статус -  "+n.statusText)}})}var i={},t;n.ajaxSetup({cache:!1});t={init:function(t){i=n.extend(!0,{},{url:null,"async":!0,multiple:!1,size:5},t);n(this).data("slistbox",i);var r=this;u(this.data("slistbox").url,this.data("slistbox").async).then(function(n){f(r,n)})},refresh:function(){var n=this;u(this.data("slistbox").url).then(function(t){e(n,t)})},getSelected:function(){var t=[];return n("option:selected",n(this)).each(function(){t.push(n(this).val())}),t},setSelect:function(t){n("option:selected",n(this)).removeAttr("selected");n("option",n(this)).each(function(i,r){n(r).val()===t&&n(r).attr("selected","selected")})},getSelectedText:function(){var t=n("option:selected",n(this));return t===null||t===undefined?"":t.html()},hide:function(t){n(this).hide(t);this.data("slistbox").multiple===!0&&n("i",n(this)).hide(t)},show:function(t){n(this).show(t);this.data("slistbox").multiple===!0&&n("i",n(this)).show(t)}};n.fn.slistbox=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Метод "+i+" не существует в jQuery.slistbox");else return t.init.apply(this,arguments)}}(jQuery),function(n,t){typeof module=="object"&&module.exports?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Spinner=t()}(this,function(){"use strict";function i(n,t){var i=document.createElement(n||"div");for(var r in t)i[r]=t[r];return i}function t(n){for(var t=1,i=arguments.length;t<i;t++)n.appendChild(arguments[t]);return n}function a(n,t,i,r){var e=["opacity",t,~~(n*100),i,r].join("-"),o=.01+i/r*100,s=Math.max(1-(1-n)/t*(100-o),n),c=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=c&&"-"+c+"-"||"";return h[e]||(f.insertRule("@"+l+"keyframes "+e+"{0%{opacity:"+s+"}"+o+"%{opacity:"+n+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+n+"}100%{opacity:"+s+"}}",f.cssRules.length),h[e]=1),e}function o(n,t){var u=n.style,r,i;if(t=t.charAt(0).toUpperCase()+t.slice(1),u[t]!==undefined)return t;for(i=0;i<s.length;i++)if(r=s[i]+t,u[r]!==undefined)return r}function n(n,t){for(var i in t)n.style[o(n,i)||i]=t[i];return n}function c(n){for(var r,i,t=1;t<arguments.length;t++){r=arguments[t];for(i in r)n[i]===undefined&&(n[i]=r[i])}return n}function l(n,t){return typeof n=="string"?n:n[t%n.length]}function r(n){this.opts=c(n||{},r.defaults,v)}function y(){function u(n,t){return i("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}f.addRule(".spin-vml","behavior:url(#default#VML)");r.prototype.lines=function(i,r){function s(){return n(u("group",{coordsize:o+" "+o,coordorigin:-e+" "+-e}),{width:o,height:o})}function a(i,f,o){t(c,t(n(s(),{rotation:360/r.lines*i+"deg",left:~~f}),t(n(u("roundrect",{arcsize:r.corners}),{width:e,height:r.scale*r.width,left:r.scale*r.radius,top:-r.scale*r.width>>1,filter:o}),u("fill",{color:l(r.color,i),opacity:r.opacity}),u("stroke",{opacity:0}))))}var e=r.scale*(r.length+r.width),o=r.scale*2*e,h=-(r.width+r.length)*r.scale*2+"px",c=n(s(),{position:"absolute",top:h,left:h}),f;if(r.shadow)for(f=1;f<=r.lines;f++)a(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=r.lines;f++)a(f);return t(i,c)};r.prototype.opacity=function(n,t,i,r){var u=n.firstChild;r=r.shadow&&r.lines||0;u&&t+r<u.childNodes.length&&(u=u.childNodes[t+r],u=u&&u.firstChild,u=u&&u.firstChild,u&&(u.opacity=i))}}var s=["webkit","Moz","ms","O"],h={},u,f,v={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},e;return r.defaults={},c(r.prototype,{spin:function(t){this.stop();var f=this,r=f.opts,e=f.el=i(null,{className:r.className});if(n(e,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),t&&t.insertBefore(e,t.firstChild||null),e.setAttribute("role","progressbar"),f.lines(e,f.opts),!u){var s=0,l=(r.lines-1)*(1-r.direction)/2,h,c=r.fps,o=c/r.speed,a=(1-r.opacity)/(o*r.trail/100),v=o/r.lines;(function y(){s++;for(var n=0;n<r.lines;n++)h=Math.max(1-(s+(r.lines-n)*v)%o*a,r.opacity),f.opacity(e,n*r.direction+l,h,r);f.timeout=f.el&&setTimeout(y,~~(1e3/c))})()}return f},stop:function(){var n=this.el;return n&&(clearTimeout(this.timeout),n.parentNode&&n.parentNode.removeChild(n),this.el=undefined),this},lines:function(r,f){function s(t,r){return n(i(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:t,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*e+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var e=0,h=(f.lines-1)*(1-f.direction)/2,o;e<f.lines;e++)o=n(i(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:u&&a(f.opacity,f.trail,h+e*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&t(o,n(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(o,s(l(f.color,e),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(n,t,i){t<n.childNodes.length&&(n.childNodes[t].style.opacity=i)}}),typeof document!="undefined"&&(f=function(){var n=i("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),e=n(i("group"),{behavior:"url(#default#VML)"}),!o(e,"transform")&&e.adj?y():u=o(e,"animation")),r}),function(n){n.fn.tableHeadFixer=function(t){function i(){function e(){var r=n(i.table),t;i.head&&(i.left>0&&(t=r.find("thead tr"),t.each(function(t,r){u(r,function(t){n(t).css("z-index",i["z-index"]+1)})})),i.right>0&&(t=r.find("thead tr"),t.each(function(t,r){f(r,function(t){n(t).css("z-index",i["z-index"]+1)})})));i.foot&&(i.left>0&&(t=r.find("tfoot tr"),t.each(function(t,r){u(r,function(t){n(t).css("z-index",i["z-index"])})})),i.right>0&&(t=r.find("tfoot tr"),t.each(function(t,r){f(r,function(t){n(t).css("z-index",i["z-index"])})})))}function o(){var t=n(i.parent),r=n(i.table);t.append(r);t.css({"overflow-x":"auto","overflow-y":"auto"});t.on("scroll",function(){var u=t[0].scrollWidth,f=t[0].clientWidth,e=t[0].scrollHeight,o=t[0].clientHeight,n=t.scrollTop(),r=t.scrollLeft();i.head&&this.find("thead tr > *").css("top",n);i.foot&&this.find("tfoot tr > *").css("bottom",e-o-n);i.left>0&&i.leftColumns.css("left",r);i.right>0&&i.rightColumns.css("right",u-f-r)}.bind(r))}function s(){var t=n(i.table).find("thead"),f=t.find("tr"),u=t.find("tr > *");r(u);u.css({position:"relative","background-clip":"padding-box"})}function h(){var u=n(i.table).find("tfoot"),t=u.find("tr > *");r(t);t.css({position:"relative","background-clip":"padding-box"})}function c(){var e=n(i.table),t,f;i.leftColumns=n();t=e.find("tr");t.each(function(n,t){u(t,function(n){i.leftColumns=i.leftColumns.add(n)})});f=i.leftColumns;f.each(function(t,i){i=n(i);r(i);i.css({position:"relative","background-clip":"padding-box"})})}function l(){var e=n(i.table),o=i.right,t,u;i.rightColumns=n();t=e.find("tr");t.each(function(n,t){f(t,function(n){i.rightColumns=i.rightColumns.add(n)})});u=i.rightColumns;u.each(function(t,i){i=n(i);r(i);i.css({position:"relative","background-clip":"padding-box"})})}function r(t){t.each(function(t,i){var e,r,u,f;i=n(i);e=n(i).parent();r=i.css("background-color");r=r==="transparent"||r==="rgba(0, 0, 0, 0)"?null:r;u=e.css("background-color");u=u==="transparent"||u==="rgba(0, 0, 0, 0)"?null:u;f=u?u:"white";f=r?r:f;i.css("background-color",f)})}function u(t,r){for(var o=i.left,f=1,u=1;u<=o;u=u+f){var s=f>1?u-1:u,e=n(t).find("> *:nth-child("+s+")"),h=e.prop("colspan");e.cellPos().left<o&&r(e);f=h}}function f(t,r){for(var o=i.right,f=1,u=1;u<=o;u=u+f){var s=f>1?u-1:u,e=n(t).find("> *:nth-last-child("+s+")"),h=e.prop("colspan");r(e);f=h}}var i=n.extend({head:!0,foot:!1,left:0,right:0,"z-index":0},t||{});i.table=this;n(this).css("border-collapse","inherit");i.parent=n(i.table).parent();o();i.head===!0&&s();i.foot===!0&&h();i.left>0&&c();i.right>0&&l();e();n(i.parent).trigger("scroll");n(window).on("resize",function(){n(i.parent).trigger("scroll")})}return this.each(function(){i.call(this)})}}(jQuery),function(n){function t(t){var i=[];t.children("tr").each(function(t,r){n(r).children("td, th").each(function(r,u){for(var h=n(u),e=h.attr("colspan")|0,o=h.attr("rowspan")|0,s,f,c,e=e?e:1,o=o?o:1;i[t]&&i[t][r];++r);for(s=r;s<r+e;++s)for(f=t;f<t+o;++f)i[f]||(i[f]=[]),i[f][s]=!0;c={top:t,left:r};h.data("cellPos",c)})})}n.fn.cellPos=function(n){var i=this.first(),u=i.data("cellPos"),r;return(!u||n)&&(r=i.closest("table, thead, tbody, tfoot"),t(r)),i.data("cellPos")}}(jQuery);